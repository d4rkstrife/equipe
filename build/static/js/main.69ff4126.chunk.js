(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),s=a.n(l),i=(a(37),a(3)),o=a(4),c=a(2),m=a(6),u=a(5),d=(a(38),a(7)),h=a.n(d),p=a(24),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={nom:n.props.data[0],etat:n.props.data[1]},n.updateFirebase=n.updateFirebase.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return"nom"!==this.state.nom&&"code"!==this.state.nom&&"ordre"!==this.state.nom&&"user"!==this.state.nom?r.a.createElement("div",{className:"equipement_container"},r.a.createElement("button",{onClick:this.updateFirebase,className:this.state.etat+" etat_button"},this.state.nom)):null}},{key:"updateFirebase",value:function(){var e=h.a.firestore().collection("gare").doc(this.props.id);"Ok"===this.state.etat?e.update(Object(p.a)({},this.state.nom,"En panne")):e.update(Object(p.a)({},this.state.nom,"Ok")),e.update({user:h.a.auth().currentUser.displayName})}}]),a}(r.a.Component),E=a.p+"static/media/check-square.6ffba6b5.svg",v=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isOccupied:!1,todayDate:n.formatDate(n.props.item.stop_date_time.departure_date_time)},n.trainClick=n.trainClick.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"trainElt",onClick:this.trainClick},r.a.createElement("p",null,this.props.item.display_informations.headsign),r.a.createElement("p",null,this.props.item.display_informations.direction),r.a.createElement("p",null,this.formatHour(this.props.item.stop_date_time.departure_date_time)),this.state.isOccupied?r.a.createElement("img",{id:"trainelt_occupied",src:E,alt:"Logo"}):"")}},{key:"trainClick",value:function(){var e=this,t=h.a.firestore();!1===this.state.isOccupied?t.collection("train").doc(e.props.item.display_informations.headsign).set({date:[this.formatDate(this.props.item.stop_date_time.departure_date_time)],user:h.a.auth().currentUser.displayName}).then((function(){e.setState({isOccupied:!0})})).catch((function(e){console.error("Error writing document: ",e)})):t.collection("train").doc(e.props.item.display_informations.headsign).delete().then((function(){e.setState({isOccupied:!1})})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"componentDidMount",value:function(){var e=this;h.a.firestore().collection("train").get().then((function(t){t.forEach((function(t){e.props.item.display_informations.headsign===t.id&&e.state.todayDate===t.data().date.toString()&&e.setState({isOccupied:!0})}))}))}},{key:"formatDate",value:function(e){return e.toString().slice(0,8)}},{key:"formatHour",value:function(e){var t=e.toString().slice(-6,-2);return t.slice(0,2)+":"+t.slice(2,4)}}]),a}(n.Component),f=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:null},n}return Object(o.a)(a,[{key:"render",value:function(){return null===this.state.data?r.a.createElement("p",null,"Chargement des trains"):r.a.createElement(n.Fragment,null,this.state.data.departures.map((function(e,t){return r.a.createElement(v,{key:t,item:e,index:t})})))}},{key:"componentDidMount",value:function(){var e=this,t=new Date,a=this.formatDate(t.getFullYear()),n=this.formatDate(t.getMonth()+1),r=this.formatDate(t.getDate()),l=this.formatDate(t.getHours()),s=this.formatDate(t.getMinutes()),i=this.formatDate(t.getSeconds()),o="".concat(a).concat(n).concat(r).concat(l).concat(s).concat(i);fetch("https://api.navitia.io/v1/coverage/fr-se/physical_modes/physical_mode:Tramway/stop_areas/".concat(this.props.data,"/departures?from_datetime=").concat(o,"&key=0a6f65c0-c3be-4fe3-a8e5-9aac523d5be7")).then((function(e){return e.json()})).then((function(t){return e.setState({data:t})}))}},{key:"formatDate",value:function(e){return e=e<10?"0"+e.toString():e.toString()}}]),a}(n.Component),g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={showDetails:!1},n.buttonClick=n.buttonClick.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=Math.floor(1e5*Math.random());return!1!==this.state.showDetails?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"pink_button",onClick:this.buttonClick},"Cacher"),r.a.createElement("div",{className:"liste_trains"},r.a.createElement(f,{key:e,data:this.props.data}))):r.a.createElement("button",{className:"pink_button",onClick:this.buttonClick},"Prochains d\xe9parts")}},{key:"buttonClick",value:function(){!1===this.state.showDetails?this.setState({showDetails:!0}):this.setState({showDetails:!1})}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isShown:!1},n.showDetails=n.showDetails.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=Object.entries(this.props.data);return!0===this.state.isShown?r.a.createElement("div",{className:"gare_elt"},r.a.createElement("h2",{onClick:this.showDetails},this.props.data.nom),r.a.createElement("div",{className:"equipement_elt"},t.map((function(t){return r.a.createElement(b,{key:t,data:t,id:e.props.id})}))),r.a.createElement(g,{key:this.props.data.code,data:this.props.data.code})):r.a.createElement("div",{className:"gare_elt",onClick:this.showDetails},r.a.createElement("h2",null,this.props.data.nom))}},{key:"showDetails",value:function(){!0===this.state.isShown?this.setState({isShown:!1}):this.setState({isShown:!0})}}]),a}(r.a.Component),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,items:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=d.firestore(),t=this;e.collection("gare").orderBy("ordre").onSnapshot((function(e){t.setState({isLoaded:!0,items:e.docs})}))}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,n=e.items;return t?r.a.createElement("div",null,"Erreur : ",t.message):a?r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement(y,{key:t,data:e.data(),id:e.id})}))):r.a.createElement("div",null,"Chargement\u2026")}}]),a}(r.a.Component),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={mail:"",password:"",error:""},n.handleChangeMail=n.handleChangeMail.bind(Object(c.a)(n)),n.handleChangePassword=n.handleChangePassword.bind(Object(c.a)(n)),n.firebaseLogin=n.firebaseLogin.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"mail"},"mail:")," ",r.a.createElement("input",{id:"mail",type:"text",name:"username",autoComplete:"username",value:this.state.mail,onChange:this.handleChangeMail,required:!0}),r.a.createElement("label",{htmlFor:"password"},"password:")," ",r.a.createElement("input",{id:"password ",type:"password",name:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChangePassword,required:!0}),r.a.createElement("button",{className:"pink_button",type:"submit",onClick:this.firebaseLogin},"Login")),r.a.createElement("p",null,this.state.error))}},{key:"firebaseLogin",value:function(e){var t=this;e.preventDefault(),h.a.auth().signInWithEmailAndPassword(this.state.mail,this.state.password).catch((function(e){t.setState({error:e.message}),console.log(e.code,e.message)}))}},{key:"handleChangeMail",value:function(e){this.setState({mail:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={nom:"",mail:"",password:"",error:""},n.handleChangeNom=n.handleChangeNom.bind(Object(c.a)(n)),n.handleChangeMail=n.handleChangeMail.bind(Object(c.a)(n)),n.handleChangePassword=n.handleChangePassword.bind(Object(c.a)(n)),n.firebaseCreate=n.firebaseCreate.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"nom"},"nom:")," ",r.a.createElement("input",{id:"nom",type:"text",name:"nom",autoComplete:"nom",value:this.state.nom,onChange:this.handleChangeNom,required:!0}),r.a.createElement("label",{htmlFor:"mail"},"mail:")," ",r.a.createElement("input",{id:"mail",type:"text",name:"username",autoComplete:"username",value:this.state.mail,onChange:this.handleChangeMail,required:!0}),r.a.createElement("label",{htmlFor:"password"},"password:")," ",r.a.createElement("input",{id:"password ",type:"password",name:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChangePassword,required:!0}),r.a.createElement("button",{className:"pink_button",type:"submit",onClick:this.firebaseCreate},"Login")),r.a.createElement("p",null,this.state.error))}},{key:"firebaseCreate",value:function(e){var t=this;e.preventDefault(),h.a.auth().createUserWithEmailAndPassword(this.state.mail,this.state.password).then((function(){h.a.auth().currentUser.updateProfile({displayName:t.state.nom})})).catch((function(e){t.setState({error:e.message}),console.log(e.code,e.message)}))}},{key:"handleChangeNom",value:function(e){this.setState({nom:e.target.value})}},{key:"handleChangeMail",value:function(e){this.setState({mail:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}}]),a}(n.Component),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return"SignIn"===this.props.typeOf?r.a.createElement(O,null):r.a.createElement(k,null)}}]),a}(n.Component),j=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={typeOf:"SignIn",signIn:"active",signUp:"inactive"},n.changeStateIn=n.changeStateIn.bind(Object(c.a)(n)),n.changeStateUp=n.changeStateUp.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("ul",{className:"login_choice"},r.a.createElement("li",{className:this.state.signIn},r.a.createElement("a",{onClick:this.changeStateIn,href:"#"},"Se connecter")),r.a.createElement("li",{className:this.state.signUp},r.a.createElement("a",{onClick:this.changeStateUp,href:"#"},"Cr\xe9er un compte"))),r.a.createElement(S,{typeOf:this.state.typeOf}))}},{key:"changeStateIn",value:function(){this.setState({typeOf:"SignIn",signIn:"active",signUp:"inactive"})}},{key:"changeStateUp",value:function(){this.setState({typeOf:"SignUp",signIn:"inactive",signUp:"active"})}}]),a}(n.Component),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={date:"",numeroTrain:"",nombreClient:"",sbControle:"",sbBord:"",sbPv:"",nbrBnc:"",nbrAutres:"",total:"",commentaires:""},n.submit=n.submit.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Rapport"),r.a.createElement("form",{className:"form-rapport",onSubmit:this.submit,noValidate:!0},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"date"},"Date : "),r.a.createElement("input",{type:"date",id:"date",name:"date",value:this.state.date,onChange:function(t){return e.setState({date:t.target.value})},required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"numero-train"}),r.a.createElement("input",{type:"number",id:"numero-train",name:"numero-train",value:this.state.numeroTrain,placeholder:"Num\xe9ro Train",onChange:function(t){return e.setState({numeroTrain:t.target.value})},required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"nbr-clients"}),r.a.createElement("input",{type:"number",id:"nbr-clients",name:"nbr-clients",value:this.state.nombreClient,placeholder:"Personnes control\xe9es",onChange:function(t){return e.setState({nombreClient:t.target.value})},required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"sb-controle"}),r.a.createElement("input",{type:"number",id:"sb-controle",name:"sb-controle",value:this.state.sbControle,placeholder:"Nombre SB Contr\xf4le",onChange:function(t){return e.setState({sbControle:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"sb-bord"}),r.a.createElement("input",{type:"number",id:"sb-bord",name:"sb-bord",value:this.state.sbBord,placeholder:"Nombre SB Bord",onChange:function(t){return e.setState({sbBord:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"sb-pv"}),r.a.createElement("input",{type:"number",id:"sb-pv",name:"sb-pv",value:this.state.sbPv,placeholder:"Nombre SB PV",onChange:function(t){return e.setState({sbPv:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"bnc"}),r.a.createElement("input",{type:"number",id:"bnc",name:"bnc",value:this.state.nbrBnc,placeholder:"Nombre BNC",onChange:function(t){return e.setState({nbrBnc:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"autres"}),r.a.createElement("input",{type:"number",id:"autres",name:"autres",value:this.state.nbrAutres,placeholder:"Autres",onChange:function(t){return e.setState({nbrAutres:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"total"}),r.a.createElement("input",{type:"number",id:"total",name:"total",value:this.state.total,placeholder:"Montant Total",onChange:function(t){return e.setState({total:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"commentaires"}),r.a.createElement("textarea",{id:"commentaires",name:"commentaires",value:this.state.commentaires,placeholder:"Commentaires",onChange:function(t){return e.setState({commentaires:t.target.value})}})),r.a.createElement("button",{className:"pink_button",type:"submit"},"Envoyer Rapport"),r.a.createElement("p",null,this.state.errorMessage)))}},{key:"submit",value:function(e){e.preventDefault();var t=h.a.firestore();""!==this.state.date&&""!==this.state.numeroTrain&&""!==this.state.nombreClient?(t.collection("rapports").add({data:this.state,user:h.a.auth().currentUser.displayName}),this.setState({date:"",numeroTrain:"",nombreClient:"",sbControle:"",sbBord:"",sbPv:"",nbrBnc:"",nbrAutres:"",total:"",commentaires:""})):(console.log("error"),this.setState({errorMessage:"Les champs date, numero train et nombre clients sont obligatoires."}))}}]),a}(n.Component),w=a(20),D=a(9),_=a.p+"static/media/home.f981ee9d.svg",B=a.p+"static/media/log-out.3d243e9f.svg",F=a.p+"static/media/file-text.cb094fae.svg",A=a.p+"static/media/file.57e885a5.svg",P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={showDetails:!1,data:e.data.data().data,user:e.data.data().user,type:e.type},n.showDetails=n.showDetails.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return"date"===this.state.type?r.a.createElement("div",{onClick:this.showDetails,className:"rapport-details"},r.a.createElement("p",null,this.state.data.numeroTrain),this.state.showDetails?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"Date : "),r.a.createElement("p",null,this.state.data.date)),r.a.createElement("div",{className:"info-form"},r.a.createElement("p",null,"Agent :"),r.a.createElement("p",null,this.state.user)),r.a.createElement("div",{className:"info-form"},r.a.createElement("p",null,"Clients control\xe9s:"),r.a.createElement("p",null,this.state.data.nombreClient)),r.a.createElement("div",{className:"detail-controle"},""!==this.state.data.sbControle?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB controle"),r.a.createElement("p",null,this.state.data.sbControle)):"",""!==this.state.data.sbBord?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB bord"),r.a.createElement("p",null,this.state.data.sbBord)):"",""!==this.state.data.sbPv?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB PV"),r.a.createElement("p",null,this.state.data.sbPv)):"",""!==this.state.data.nbrBnc?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"Nbr BNC"),r.a.createElement("p",null,this.state.data.nbrBnc)):"",""!==this.state.data.total?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"Montant total"),r.a.createElement("p",null,this.state.data.total,"\u20ac")):""),""!==this.state.data.commentaires?r.a.createElement("div",{className:"detail-controle-com"},r.a.createElement("p",null,"Commentaires"),r.a.createElement("p",null,this.state.data.commentaires)):""):""):r.a.createElement("div",{onClick:this.showDetails,className:"rapport-details"},r.a.createElement("p",null,this.state.data.date),this.state.showDetails?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"N\xb0 Train: "),r.a.createElement("p",null,this.state.data.numeroTrain)),r.a.createElement("div",{className:"info-form"},r.a.createElement("p",null,"Agent :"),r.a.createElement("p",null,this.state.user)),r.a.createElement("div",{className:"info-form"},r.a.createElement("p",null,"Clients control\xe9s:"),r.a.createElement("p",null,this.state.data.nombreClient)),r.a.createElement("div",{className:"detail-controle"},""!==this.state.data.sbControle?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB controle"),r.a.createElement("p",null,this.state.data.sbControle)):"",""!==this.state.data.sbBord?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB bord"),r.a.createElement("p",null,this.state.data.sbBord)):"",""!==this.state.data.sbPv?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"SB PV"),r.a.createElement("p",null,this.state.data.sbPv)):"",""!==this.state.data.nbrBnc?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"Nbr BNC"),r.a.createElement("p",null,this.state.data.nbrBnc)):"",""!==this.state.data.total?r.a.createElement("div",{className:"detail-controle-elt"},r.a.createElement("p",null,"Montant total"),r.a.createElement("p",null,this.state.data.total,"\u20ac")):""),""!==this.state.data.commentaires?r.a.createElement("div",{className:"detail-controle-com"},r.a.createElement("p",null,"Commentaires"),r.a.createElement("p",null,this.state.data.commentaires)):""):"")}},{key:"showDetails",value:function(){this.state.showDetails?this.setState({showDetails:!1}):this.setState({showDetails:!0})}}]),a}(n.Component),U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isAdmin:e.isAdmin,date:null,number:null},n.getRapportsByDate=n.getRapportsByDate.bind(Object(c.a)(n)),n.getRapportsByNumber=n.getRapportsByNumber.bind(Object(c.a)(n)),n.resetState=n.resetState.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.state.items?"date"===this.state.type?r.a.createElement(n.Fragment,null,this.state.items.map((function(e,t){return r.a.createElement(P,{data:e,key:t,type:"date"})})),r.a.createElement("button",{className:"pink_button",id:"reset-button",type:"submit",onClick:this.resetState},"RAZ")):r.a.createElement(n.Fragment,null,this.state.items.map((function(e,t){return r.a.createElement(P,{data:e,key:t,type:"number"})})),r.a.createElement("button",{className:"pink_button",id:"reset-button",type:"submit",onClick:this.resetState},"RAZ")):r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"Rechercher les rapports"),r.a.createElement("form",{onSubmit:this.getRapportsByDate},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"date"},"Date : "),r.a.createElement("input",{type:"date",id:"date",name:"date",onChange:function(t){return e.setState({date:t.target.value})},required:!0}),r.a.createElement("button",{className:"pink_button",type:"submit"},"Rapports"))),r.a.createElement("form",{onSubmit:this.getRapportsByNumber},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"numero"},"N\xb0 Train : "),r.a.createElement("input",{type:"number",id:"number",name:"number",onChange:function(t){return e.setState({number:t.target.value})},required:!0}),r.a.createElement("button",{className:"pink_button",type:"submit"},"Rapports"))))}},{key:"getRapportsByDate",value:function(e){var t=this;e.preventDefault(),h.a.firestore().collection("rapports").where("data.date","==",this.state.date).onSnapshot((function(e){t.setState({items:e.docs,type:"date"})}))}},{key:"getRapportsByNumber",value:function(e){var t=this;e.preventDefault(),h.a.firestore().collection("rapports").where("data.numeroTrain","==",this.state.number).onSnapshot((function(e){t.setState({items:e.docs,type:"number"})}))}},{key:"resetState",value:function(){this.setState({items:null,type:null,date:null,number:null})}},{key:"componentWillUnmount",value:function(){this.resetState()}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={connectedUser:!1,pageReady:!1,isAdmin:!1},n.logOut=n.logOut.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.state.pageReady&&this.state.connectedUser?r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Equipe de ligne"),r.a.createElement(w.a,null,r.a.createElement("div",null,r.a.createElement("ul",{className:"navibar"},r.a.createElement("li",{className:"navibar_lien"},r.a.createElement(w.b,{to:"/"},r.a.createElement("img",{id:"logo_maison",src:_,alt:"Accueil"}))),r.a.createElement("li",{className:"navibar_lien"},r.a.createElement(w.b,{to:"/form"},r.a.createElement("img",{id:"logo_maison",src:A,alt:"Formulaire"}))),this.state.isAdmin?r.a.createElement("li",{className:"navibar_lien"},r.a.createElement(w.b,{to:"/formList"},r.a.createElement("img",{id:"logo_maison",src:F,alt:"Liste formulaires"}))):"",r.a.createElement("li",{className:"navibar_lien"},r.a.createElement("button",{id:"deco_button",onClick:this.logOut},r.a.createElement("img",{id:"logo_deco",src:B,alt:"Deco"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"main-route-place"},r.a.createElement(D.a,{exact:!0,path:"/",component:C}),r.a.createElement(D.a,{path:"/formList",component:function(){return r.a.createElement(U,{isAdmin:e.state.isAdmin})}}),r.a.createElement(D.a,{path:"/form",component:N}))))):this.state.pageReady&&!this.state.connectedUser?r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Equipe de ligne"),r.a.createElement(j,null)):r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Equipe de ligne"),r.a.createElement("p",null,"Chargement..."))}},{key:"componentDidMount",value:function(){var e=this,t=this;h.a.auth().onAuthStateChanged((function(e){t.setState({connectedUser:e});var a=h.a.firestore();e&&a.collection("adminUsers").doc(e.email).get().then((function(e){e.exists&&!0===e.data().isAdmin&&t.setState({isAdmin:!0})})).catch((function(e){console.log("Error getting document:",e)}))})),setTimeout((function(){e.setState({pageReady:!0})}),1e3)}},{key:"logOut",value:function(){var e=this;h.a.auth().signOut().then((function(){e.setState({connectedUser:null,isAdmin:!1})})).catch((function(e){}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.initializeApp({apiKey:"AIzaSyABuhvxIkazZbmLr4BKSnrpULERVyiiDcg",authDomain:"gare-30379.firebaseapp.com",databaseURL:"https://gare-30379.firebaseio.com",projectId:"gare-30379",storageBucket:"gare-30379.appspot.com",messagingSenderId:"281929472736",appId:"1:281929472736:web:8b86e49dcae5e710af0e85",measurementId:"G-KJG2R20BE8"}),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.69ff4126.chunk.js.map