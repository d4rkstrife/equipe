{"ast":null,"code":"import _classCallCheck from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import firebase from'firebase';import FormConsult from'./FormConsult';var FormList=/*#__PURE__*/function(_Component){_inherits(FormList,_Component);var _super=_createSuper(FormList);function FormList(props){var _this;_classCallCheck(this,FormList);_this=_super.call(this,props);_this.state={isAdmin:props.isAdmin,date:null,number:null};_this.getRapportsByDate=_this.getRapportsByDate.bind(_assertThisInitialized(_this));_this.getRapportsByNumber=_this.getRapportsByNumber.bind(_assertThisInitialized(_this));_this.resetState=_this.resetState.bind(_assertThisInitialized(_this));return _this;}_createClass(FormList,[{key:\"render\",value:function render(){var _this2=this;if(!this.state.items){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Rechercher les rapports\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.getRapportsByDate},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date\"},\"Date : \"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",id:\"date\",name:\"date\",onChange:function onChange(e){return _this2.setState({date:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"button\",{className:\"pink_button\",type:\"submit\"},\"Rapports\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.getRapportsByNumber},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"numero\"},\"N\\xB0 Train : \"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",id:\"number\",name:\"number\",onChange:function onChange(e){return _this2.setState({number:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"button\",{className:\"pink_button\",type:\"submit\"},\"Rapports\"))));}else if(this.state.type===\"date\"){return/*#__PURE__*/React.createElement(Fragment,null,this.state.items.map(function(item,index){return/*#__PURE__*/React.createElement(FormConsult,{data:item,key:index,type:\"date\"});}),/*#__PURE__*/React.createElement(\"button\",{className:\"pink_button\",id:\"reset-button\",type:\"submit\",onClick:this.resetState},\"RAZ\"));}else{return/*#__PURE__*/React.createElement(Fragment,null,this.state.items.map(function(item,index){return/*#__PURE__*/React.createElement(FormConsult,{data:item,key:index,type:\"number\"});}),/*#__PURE__*/React.createElement(\"button\",{className:\"pink_button\",id:\"reset-button\",type:\"submit\",onClick:this.resetState},\"RAZ\"));}}},{key:\"getRapportsByDate\",value:function getRapportsByDate(event){var _this3=this;event.preventDefault();var db=firebase.firestore();db.collection(\"rapports\").where(\"data.date\",\"==\",this.state.date).onSnapshot(function(querySnapshot){_this3.setState({items:querySnapshot.docs,type:\"date\"});});}},{key:\"getRapportsByNumber\",value:function getRapportsByNumber(event){var _this4=this;event.preventDefault();var db=firebase.firestore();db.collection(\"rapports\").where(\"data.numeroTrain\",\"==\",this.state.number).onSnapshot(function(querySnapshot){_this4.setState({items:querySnapshot.docs,type:\"number\"});});}},{key:\"resetState\",value:function resetState(){this.setState({items:null,type:null,date:null,number:null});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.resetState();}}]);return FormList;}(Component);export default FormList;","map":{"version":3,"sources":["C:/Users/pgdc8/Desktop/equipe/src/FormList.js"],"names":["React","Component","Fragment","firebase","FormConsult","FormList","props","state","isAdmin","date","number","getRapportsByDate","bind","getRapportsByNumber","resetState","items","e","setState","target","value","type","map","item","index","event","preventDefault","db","firestore","collection","where","onSnapshot","querySnapshot","docs"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport firebase from 'firebase';\r\nimport FormConsult from './FormConsult'\r\n\r\nclass FormList extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isAdmin: props.isAdmin,\r\n            date: null,\r\n            number: null\r\n        }\r\n        this.getRapportsByDate = this.getRapportsByDate.bind(this);\r\n        this.getRapportsByNumber = this.getRapportsByNumber.bind(this);\r\n        this.resetState = this.resetState.bind(this);\r\n    }\r\n    render() {\r\n        if (!this.state.items) {\r\n            return (\r\n                <Fragment>\r\n                    <h3>Rechercher les rapports</h3>\r\n                    <form onSubmit={this.getRapportsByDate}>\r\n                        <div>\r\n                            <label htmlFor=\"date\">Date : </label>\r\n                            <input type=\"date\" id=\"date\" name=\"date\"\r\n                                onChange={e => this.setState({ date: e.target.value })} required></input>\r\n                            <button className=\"pink_button\" type=\"submit\">Rapports</button>\r\n                        </div>\r\n\r\n                    </form>\r\n                    <form onSubmit={this.getRapportsByNumber}>\r\n                        <div>\r\n                            <label htmlFor=\"numero\">NÂ° Train : </label>\r\n                            <input type=\"number\" id=\"number\" name=\"number\"\r\n                                onChange={e => this.setState({ number: e.target.value })} required></input>\r\n                            <button className=\"pink_button\" type=\"submit\">Rapports</button>\r\n                        </div>\r\n\r\n                    </form>\r\n                </Fragment>\r\n\r\n            )\r\n        } else if (this.state.type === \"date\") {\r\n            return (\r\n                <Fragment>\r\n                    {\r\n                        this.state.items.map((item, index) =>\r\n                            <FormConsult data={item} key={index} type=\"date\" />\r\n                        )\r\n                    }\r\n                    <button className=\"pink_button\" id=\"reset-button\" type=\"submit\" onClick={this.resetState}>RAZ</button>\r\n                </Fragment>\r\n            )\r\n        } else {\r\n            return (\r\n                <Fragment>\r\n                    {\r\n                        this.state.items.map((item, index) =>\r\n                            <FormConsult data={item} key={index} type=\"number\" />\r\n                        )\r\n                    }\r\n                    <button className=\"pink_button\" id=\"reset-button\" type=\"submit\" onClick={this.resetState}>RAZ</button>\r\n                </Fragment>\r\n            )\r\n        }\r\n    }\r\n\r\n    getRapportsByDate(event) {\r\n        event.preventDefault();\r\n        let db = firebase.firestore();\r\n        db.collection(\"rapports\").where(\"data.date\", \"==\", this.state.date)\r\n\r\n            .onSnapshot((querySnapshot) => {\r\n                this.setState({\r\n                    items: querySnapshot.docs,\r\n                    type: \"date\"\r\n                });\r\n            })\r\n    }\r\n    getRapportsByNumber(event) {\r\n        event.preventDefault();\r\n        let db = firebase.firestore();\r\n        db.collection(\"rapports\").where(\"data.numeroTrain\", \"==\", this.state.number)\r\n\r\n            .onSnapshot((querySnapshot) => {\r\n                this.setState({\r\n                    items: querySnapshot.docs,\r\n                    type: \"number\"\r\n                });\r\n            })\r\n    }\r\n    resetState() {\r\n        this.setState({ items: null, type: null, date: null, number: null })\r\n    }\r\n    componentWillUnmount() {\r\n        this.resetState();\r\n    }\r\n}\r\n\r\nexport default FormList;"]},"metadata":{},"sourceType":"module"}