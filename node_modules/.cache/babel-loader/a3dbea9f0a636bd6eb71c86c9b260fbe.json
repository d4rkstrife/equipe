{"ast":null,"code":"import _classCallCheck from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/pgdc8/Desktop/equipe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./App.css';import ListeGare from'./ListeGare';import firebase from'firebase';import LogIn from'./LogIn';import Form from'./Form';import{BrowserRouter,Route,Link}from\"react-router-dom\";import logoMaison from\"./image/home.svg\";import logoDeco from\"./image/log-out.svg\";import logoFormConsult from\"./image/file-text.svg\";import logoForm from\"./image/file.svg\";import FormList from'./FormList';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={connectedUser:false,pageReady:false,isAdmin:false};_this.logOut=_this.logOut.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;if(this.state.pageReady&&this.state.connectedUser){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Equipe de ligne\"),/*#__PURE__*/React.createElement(BrowserRouter,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"navibar\"},/*#__PURE__*/React.createElement(\"li\",{className:\"navibar_lien\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{id:\"logo_maison\",src:logoMaison,alt:\"Accueil\"}))),/*#__PURE__*/React.createElement(\"li\",{className:\"navibar_lien\"},/*#__PURE__*/React.createElement(Link,{to:\"/form\"},/*#__PURE__*/React.createElement(\"img\",{id:\"logo_maison\",src:logoForm,alt:\"Formulaire\"}))),this.state.isAdmin?/*#__PURE__*/React.createElement(\"li\",{className:\"navibar_lien\"},/*#__PURE__*/React.createElement(Link,{to:\"/formList\"},/*#__PURE__*/React.createElement(\"img\",{id:\"logo_maison\",src:logoFormConsult,alt:\"Liste formulaires\"}))):\"\",/*#__PURE__*/React.createElement(\"li\",{className:\"navibar_lien\"},/*#__PURE__*/React.createElement(\"button\",{id:\"deco_button\",onClick:this.logOut},/*#__PURE__*/React.createElement(\"img\",{id:\"logo_deco\",src:logoDeco,alt:\"Deco\"})))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"main-route-place\"},/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:ListeGare}),/*#__PURE__*/React.createElement(Route,{path:\"/formList\",component:function component(){return/*#__PURE__*/React.createElement(FormList,{isAdmin:_this2.state.isAdmin});}}),/*#__PURE__*/React.createElement(Route,{path:\"/form\",component:Form})))));}else if(this.state.pageReady&&!this.state.connectedUser){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Equipe de ligne\"),/*#__PURE__*/React.createElement(LogIn,null));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Equipe de ligne\"),/*#__PURE__*/React.createElement(\"p\",null,\"Chargement...\"));}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var that=this;firebase.auth().onAuthStateChanged(function(user){that.setState({connectedUser:user});var userDb=firebase.firestore();if(user){userDb.collection('adminUsers').doc(user.email).get().then(function(doc){if(doc.exists&&doc.data().isAdmin===true){that.setState({isAdmin:true});}}).catch(function(error){console.log(\"Error getting document:\",error);});}});setTimeout(function(){_this3.setState({pageReady:true});},1000);}},{key:\"logOut\",value:function logOut(){var that=this;firebase.auth().signOut().then(function(){// Sign-out successful.\nthat.setState({connectedUser:null,isAdmin:false});}).catch(function(error){// An error happened.\n});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/pgdc8/Desktop/equipe/src/App.js"],"names":["React","ListeGare","firebase","LogIn","Form","BrowserRouter","Route","Link","FormList","App","props","state","connectedUser","pageReady","isAdmin","logOut","bind","logoMaison","logoForm","logoFormConsult","logoDeco","that","auth","onAuthStateChanged","user","setState","userDb","firestore","collection","doc","email","get","then","exists","data","catch","error","console","log","setTimeout","signOut","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport ListeGare from './ListeGare';\nimport firebase from 'firebase';\nimport LogIn from './LogIn';\nimport Form from './Form'\nimport { BrowserRouter, Route, Link } from \"react-router-dom\";\nimport logoMaison from './image/home.svg';\nimport logoDeco from './image/log-out.svg';\nimport logoFormConsult from './image/file-text.svg';\nimport logoForm from './image/file.svg';\nimport FormList from './FormList';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      connectedUser: false,\n      pageReady: false,\n      isAdmin: false\n    }\n    this.logOut = this.logOut.bind(this)\n  }\n  render() {\n\n    if (this.state.pageReady && this.state.connectedUser) {\n      return (\n        <div className=\"App\">\n          <h1>Equipe de ligne</h1>\n\n\n          <BrowserRouter>\n            <div>\n              <ul className=\"navibar\">\n                <li className=\"navibar_lien\">\n                  <Link to=\"/\"><img id=\"logo_maison\" src={logoMaison} alt=\"Accueil\" /></Link>\n                </li>\n                <li className=\"navibar_lien\">\n                  <Link to=\"/form\"><img id=\"logo_maison\" src={logoForm} alt=\"Formulaire\" /></Link>\n                </li>\n                {this.state.isAdmin ? (\n                  <li className=\"navibar_lien\">\n                    <Link to=\"/formList\"><img id=\"logo_maison\" src={logoFormConsult} alt=\"Liste formulaires\" /></Link>\n                  </li>\n                ) : (\"\")}\n                <li className=\"navibar_lien\">\n                  <button id=\"deco_button\" onClick={this.logOut}><img id=\"logo_deco\" src={logoDeco} alt=\"Deco\" /></button>\n                </li>\n\n              </ul>\n\n              <hr />\n              <div className=\"main-route-place\">\n                <Route exact path=\"/\" component={ListeGare} />\n                <Route path=\"/formList\" component={() => <FormList isAdmin={this.state.isAdmin} />} />\n                <Route path=\"/form\" component={Form} />\n              </div>\n            </div>\n          </BrowserRouter>\n        </div>\n      );\n    } else if (this.state.pageReady && !this.state.connectedUser) {\n      return (\n        <div className=\"App\">\n          <h1>Equipe de ligne</h1>\n          <LogIn />\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"App\">\n          <h1>Equipe de ligne</h1>\n          <p>Chargement...</p>\n        </div>\n      )\n    }\n  }\n  componentDidMount() {\n    let that = this\n    firebase.auth().onAuthStateChanged(function (user) {\n      that.setState({ connectedUser: user });\n      let userDb = firebase.firestore();\n      if (user) {\n        userDb.collection('adminUsers').doc(user.email).get()\n          .then(function (doc) {\n            if (doc.exists && doc.data().isAdmin === true) {\n              that.setState({ isAdmin: true })\n            }\n          }).catch(function (error) {\n            console.log(\"Error getting document:\", error);\n          });\n      }\n    })\n\n\n    setTimeout(() => { this.setState({ pageReady: true }) }, 1000);\n  }\n  logOut() {\n    let that = this\n    firebase.auth().signOut().then(function () {\n      // Sign-out successful.\n      that.setState({ connectedUser: null, isAdmin: false })\n    }).catch(function (error) {\n      // An error happened.\n    });\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}